<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="components/bootstrap/docs/assets/css/bootstrap.css" />
    <style type="text/css">
        h2 {
            font-size : 50px;
        }
    </style>
</head>
<body>
<h2 data-marker="A">A</h2>
<h2 data-marker="B">B</h2>
<h2 data-marker="B">B</h2>
<h2 data-marker="C">C</h2>

<script src="../dm.js"></script>
<script>
    DM.add('A', function() {
        console.log('A');
        this.wait(100);
        this.node.style.color = 'red';
        console.log(this.dependency('B'));
    }, ['B', 'C']);

    DM.add('B', function() {
        console.log('B');
        this.wait(100);
        this.node.style.color = 'blue';
        console.log(this.module.global);

        this.module.data.a = 1;
    });

    DM.add('C', function() {
        console.log('C');
        this.wait(500);
        this.node.style.color = 'green';
    });

    DM.go();
</script>
</body>
</html>
